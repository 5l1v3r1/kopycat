import org.jetbrains.kotlin.gradle.tasks.KotlinCompile

plugins {
    id 'org.jetbrains.kotlin.jvm' apply false
}

allprojects {
    repositories {
        mavenCentral()
        jcenter()
        maven { url "https://jitpack.io" }
    }

    ext.kotlinx_version = "1.0.1"
}

subprojects {
    afterEvaluate {
        tasks.each { task ->
            if (task instanceof Test) {
                task.jvmArgs += ["-Xms2G", "-Xmx5G", "-XX:MaxDirectMemorySize=2g"]

                task.testLogging {
                    events "passed", "skipped", "failed" //, "standardOut", "standardError"

                    showExceptions true
                    exceptionFormat "full"
                    showCauses true
                    showStackTraces true

                    // showStandardStreams = false
                }
            }

            if (task instanceof KotlinCompile) {
                task.kotlinOptions {
                    jvmTarget = "11"
                    apiVersion = "1.3"
                    languageVersion = "1.3"
                }
            }

        }
    }
}